<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Waka Club Store</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: #030b1c;
            --card-bg: #0a162b;
            --accent-blue: #0055ff;
            --accent-cyan: #00d4ff;
            --text-main: #ffffff;
            --text-dim: #a0acbd;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            margin: 0; padding: 20px; padding-bottom: 100px;
            display: flex; flex-direction: column; align-items: center;
        }

        .header-title { font-size: 28px; margin-bottom: 25px; font-weight: 800; }
        .header-title span { color: var(--accent-blue); }

        /* –ö–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–≤–∞—Ä–∞ */
        .product-card {
            background: linear-gradient(145deg, #0a162b, #050e1f);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 24px; padding: 20px;
            width: 100%; max-width: 340px; margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .product-img { width: 100%; border-radius: 18px; margin-bottom: 15px; }
        .price-tag { font-size: 22px; color: var(--accent-cyan); font-weight: bold; margin: 10px 0; }

        /* –í—ã–±–æ—Ä –≤–∫—É—Å–æ–≤ */
        .flavor-list { display: none; flex-direction: column; gap: 8px; margin-top: 15px; }
        .flavor-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white; padding: 12px; border-radius: 12px;
            text-align: center; cursor: pointer; transition: 0.2s;
        }
        .flavor-item:active { background: var(--accent-blue); }

        .action-button {
            background: linear-gradient(90deg, var(--accent-blue), #00a2ff);
            color: white; border: none; padding: 14px;
            width: 100%; border-radius: 16px; font-weight: bold; font-size: 16px;
        }

        /* –ö–Ω–æ–ø–∫–∞ –ö–æ—Ä–∑–∏–Ω—ã */
        .cart-footer {
            position: fixed; bottom: 20px; left: 50%;
            transform: translateX(-50%);
            width: 90%; max-width: 400px;
            background: var(--accent-blue);
            padding: 15px; border-radius: 20px;
            display: none; justify-content: space-between; align-items: center;
            box-shadow: 0 5px 25px rgba(0, 85, 255, 0.4);
            z-index: 1000;
        }

        .cart-info { font-weight: bold; }
        .checkout-btn {
            background: white; color: var(--accent-blue);
            border: none; padding: 8px 15px; border-radius: 12px; font-weight: 800;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è */
        @keyframes bounce {
            0% { transform: translateX(-50%) scale(0.9); }
            70% { transform: translateX(-50%) scale(1.05); }
            100% { transform: translateX(-50%) scale(1); }
        }
        .show-cart { display: flex; animation: bounce 0.4s ease; }
    </style>
</head>
<body>

    <div class="header-title">WAKA <span>CLUB</span></div>

    <div class="product-card" id="card-waka20">
        <img src="https://via.placeholder.com/400x300/0a162b/ffffff?text=SoPro+20k" class="product-img">
        <h3>SoPro 20,000</h3>
        <div class="price-tag">15 000 ‚Ç∏</div>
        <button class="action-button" onclick="toggleFlavors('waka20')">–í–´–ë–†–ê–¢–¨ –í–ö–£–°</button>
        <div class="flavor-list" id="list-waka20">
            <div class="flavor-item" onclick="addToCart('Vaka 20k', 15000, '–ú–∞–Ω–≥–æ-–õ–µ–¥')">ü•≠ –ú–∞–Ω–≥–æ-–õ–µ–¥</div>
            <div class="flavor-item" onclick="addToCart('Vaka 20k', 15000, '–ê—Ä–±—É–∑')">üçâ –ê—Ä–±—É–∑</div>
        </div>
    </div>

    <div class="product-card" id="card-waka30">
        <img src="https://via.placeholder.com/400x300/0a162b/ffffff?text=Ultra+30k" class="product-img">
        <h3>Ultra 30,000</h3>
        <div class="price-tag">19 000 ‚Ç∏</div>
        <button class="action-button" onclick="toggleFlavors('waka30')">–í–´–ë–†–ê–¢–¨ –í–ö–£–°</button>
        <div class="flavor-list" id="list-waka30">
            <div class="flavor-item" onclick="addToCart('Vaka 30k', 19000, '–ß–µ—Ä–Ω–∏–∫–∞')">ü´ê –ß–µ—Ä–Ω–∏–∫–∞</div>
            <div class="flavor-item" onclick="addToCart('Vaka 30k', 19000, '–≠–Ω–µ—Ä–≥–µ—Ç–∏–∫')">üîã –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫</div>
        </div>
    </div>

    <div class="cart-footer" id="cart-panel">
        <div class="cart-info">üõí <span id="cart-count">0</span> —Ç–æ–≤–∞—Ä–æ–≤ | <span id="cart-total">0</span> ‚Ç∏</div>
        <button class="checkout-btn" onclick="sendOrder()">–ó–ê–ö–ê–ó–ê–¢–¨</button>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();

        let cart = [];

        function toggleFlavors(id) {
            const list = document.getElementById('list-' + id);
            list.style.display = list.style.display === 'flex' ? 'none' : 'flex';
        }

        function addToCart(model, price, flavor) {
            cart.push({ model, price, flavor });
            tg.HapticFeedback.notificationOccurred('success');
            updateCartUI();
        }

        function updateCartUI() {
            const panel = document.getElementById('cart-panel');
            const countEl = document.getElementById('cart-count');
            const totalEl = document.getElementById('cart-total');

            if (cart.length > 0) {
                panel.classList.add('show-cart');
                countEl.innerText = cart.length;
                const total = cart.reduce((sum, item) => sum + item.price, 0);
                totalEl.innerText = total.toLocaleString();
            }
        }

        function sendOrder() {
            if (cart.length === 0) return;
            
            // –§–æ—Ä–º–∏—Ä—É–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –±–æ—Ç–∞
            const itemsSummary = cart.map(i => `${i.model} (${i.flavor})`).join(', ');
            const totalPrice = cart.reduce((sum, item) => sum + item.price, 0);

            const data = {
                item: itemsSummary,
                price: totalPrice,
                is_multi: true // –§–ª–∞–≥, —á—Ç–æ —ç—Ç–æ –∫–æ—Ä–∑–∏–Ω–∞
            };

            tg.sendData(JSON.stringify(data));
            tg.close();
        }
    </script>
</body>
</html>
